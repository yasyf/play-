<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>/Users/yasyf/sites/testnew/play/player1.php</title>
<style type="text/css">
<!--
body.hl	{ background-color:#000000; }
pre.hl	{ color:#ffffff; background-color:#000000; font-size:10pt; font-family:Courier New;}
.num	{ color:#ff00ff; }
.esc	{ color:#cd00ff; }
.str	{ color:#cd00ff; }
.dstr	{ color:#cd00ff; }
.slc	{ color:#00ff00; font-style:italic; }
.com	{ color:#00ff00; font-style:italic; }
.dir	{ color:#ffbb00; }
.sym	{ color:#ee5896; font-weight:bold; }
.line	{ color:#55abff; }
.kwa	{ color:#00ffff; font-weight:bold; }
.kwb	{ color:#ffff00; }
.kwc	{ color:#ef1347; font-weight:bold; }
.kwd	{ color:#ffffff; font-weight:bold; }
//-->
</style>
</head>
<body class="hl">
<pre class="hl"><a name="l_1"></a><span class="line">    1 </span><span class="sym">&lt;</span>?php
<a name="l_2"></a><span class="line">    2 </span>
<a name="l_3"></a><span class="line">    3 </span><span class="kwb">$game</span> <span class="sym">=</span> <span class="kwb">$_REQUEST</span><span class="sym">[</span><span class="str">'game'</span><span class="sym">];</span>
<a name="l_4"></a><span class="line">    4 </span><span class="kwa">if</span> <span class="sym">(!</span>isset<span class="sym">(</span><span class="kwb">$game</span><span class="sym">)) {</span>
<a name="l_5"></a><span class="line">    5 </span>    <span class="kwa">exit</span><span class="sym">(</span><span class="str">&quot;game not set&quot;</span><span class="sym">);</span>
<a name="l_6"></a><span class="line">    6 </span><span class="sym">}</span>
<a name="l_7"></a><span class="line">    7 </span><span class="kwb">$turn</span> <span class="sym">=</span> <span class="kwb">$_REQUEST</span><span class="sym">[</span><span class="str">'turn'</span><span class="sym">];</span>
<a name="l_8"></a><span class="line">    8 </span><span class="kwa">if</span> <span class="sym">(!</span>isset<span class="sym">(</span><span class="kwb">$turn</span><span class="sym">)) {</span>
<a name="l_9"></a><span class="line">    9 </span>    <span class="kwa">exit</span><span class="sym">(</span><span class="str">&quot;turn not set&quot;</span><span class="sym">);</span>
<a name="l_10"></a><span class="line">   10 </span><span class="sym">}</span>
<a name="l_11"></a><span class="line">   11 </span>include <span class="str">'vars.php'</span><span class="sym">;</span>
<a name="l_12"></a><span class="line">   12 </span><span class="kwb">$player1x</span> <span class="sym">=</span> <span class="kwb">$_REQUEST</span><span class="sym">[</span><span class="str">'player1x'</span><span class="sym">];</span>
<a name="l_13"></a><span class="line">   13 </span><span class="kwb">$player1y</span> <span class="sym">=</span> <span class="kwb">$_REQUEST</span><span class="sym">[</span><span class="str">'player1y'</span><span class="sym">];</span>
<a name="l_14"></a><span class="line">   14 </span><span class="kwb">$setready</span> <span class="sym">=</span> <span class="kwb">$_REQUEST</span><span class="sym">[</span><span class="str">'setready'</span><span class="sym">];</span>
<a name="l_15"></a><span class="line">   15 </span>
<a name="l_16"></a><span class="line">   16 </span><span class="kwb">$sql2</span> <span class="sym">=</span> <span class="str">&quot;UPDATE `&quot;</span> . <span class="kwb">$game</span> . <span class="str">&quot;` SET player1x=&quot;</span> . <span class="kwb">$player1x</span> . <span class="str">&quot;, player1y=&quot;</span> . <span class="kwb">$player1y</span> . <span class="str">&quot; WHERE turn=&quot;</span> . <span class="kwb">$turn</span><span class="sym">;</span>
<a name="l_17"></a><span class="line">   17 </span><span class="kwa">mysql_query</span><span class="sym">(</span><span class="kwb">$sql2</span><span class="sym">);</span>
<a name="l_18"></a><span class="line">   18 </span>
<a name="l_19"></a><span class="line">   19 </span><span class="kwa">if</span> <span class="sym">(</span><span class="kwb">$setready</span> <span class="sym">==</span> true<span class="sym">) {</span>
<a name="l_20"></a><span class="line">   20 </span>
<a name="l_21"></a><span class="line">   21 </span>    <span class="kwb">$sql4</span> <span class="sym">=</span> <span class="str">&quot;UPDATE `&quot;</span> . <span class="kwb">$game</span> . <span class="str">&quot;` SET player1ready=0 WHERE turn=&quot;</span> . <span class="kwb">$turn</span><span class="sym">;</span>
<a name="l_22"></a><span class="line">   22 </span>    <span class="kwa">mysql_query</span><span class="sym">(</span><span class="kwb">$sql4</span><span class="sym">);</span>
<a name="l_23"></a><span class="line">   23 </span><span class="sym">}</span>
<a name="l_24"></a><span class="line">   24 </span>
<a name="l_25"></a><span class="line">   25 </span>
<a name="l_26"></a><span class="line">   26 </span><span class="kwb">$sql</span> <span class="sym">=</span> <span class="str">&quot;SELECT box1x,box2x,box3x,box1y,box2y,box3y FROM `&quot;</span> . <span class="kwb">$game</span> . <span class="str">&quot;` WHERE turn=&quot;</span> . <span class="kwb">$turn</span><span class="sym">;</span>
<a name="l_27"></a><span class="line">   27 </span><span class="kwb">$result</span> <span class="sym">=</span> <span class="kwa">mysql_query</span><span class="sym">(</span><span class="kwb">$sql</span><span class="sym">);</span>
<a name="l_28"></a><span class="line">   28 </span><span class="kwa">while</span> <span class="sym">(</span><span class="kwb">$data</span> <span class="sym">=</span> <span class="kwa">mysql_fetch_row</span><span class="sym">(</span><span class="kwb">$result</span><span class="sym">)) {</span>
<a name="l_29"></a><span class="line">   29 </span>    <span class="kwa">echo</span><span class="sym">(</span><span class="str">&quot;box1x=$data[0]&amp;box2x=$data[1]&amp;box3x=$data[2]&amp;box1y=$data[3]&amp;box2y=$data[4]&amp;box3y=$data[5]&quot;</span><span class="sym">);</span>
<a name="l_30"></a><span class="line">   30 </span><span class="sym">}</span>
<a name="l_31"></a><span class="line">   31 </span>
<a name="l_32"></a><span class="line">   32 </span><span class="kwb">$sql3</span> <span class="sym">=</span> <span class="str">&quot;SELECT player2ready FROM `&quot;</span> . <span class="kwb">$game</span> . <span class="str">&quot;` WHERE turn=&quot;</span> . <span class="kwb">$turn</span><span class="sym">;</span>
<a name="l_33"></a><span class="line">   33 </span>
<a name="l_34"></a><span class="line">   34 </span>
<a name="l_35"></a><span class="line">   35 </span><span class="kwb">$result</span> <span class="sym">=</span> <span class="kwa">mysql_query</span><span class="sym">(</span><span class="kwb">$sql3</span><span class="sym">);</span>
<a name="l_36"></a><span class="line">   36 </span><span class="kwa">while</span> <span class="sym">(</span><span class="kwb">$data</span> <span class="sym">=</span> <span class="kwa">mysql_fetch_row</span><span class="sym">(</span><span class="kwb">$result</span><span class="sym">)) {</span>
<a name="l_37"></a><span class="line">   37 </span>    <span class="kwa">echo</span><span class="sym">(</span><span class="str">&quot;&amp;player2ready=$data[0]&quot;</span><span class="sym">);</span>
<a name="l_38"></a><span class="line">   38 </span><span class="sym">}</span>
<a name="l_39"></a><span class="line">   39 </span>?<span class="sym">&gt;</span>
</pre>
</body>
</html>
<!--HTML generated by highlight 2.4.8, http://www.andre-simon.de/-->
