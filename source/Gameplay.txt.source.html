<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Play : /Gameplay.txt source</title>
    <link rel="stylesheet" href="sample.css" type="text/css">
    <link rel="stylesheet" href="sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Play</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Mon Jun  4 18:12:43 2012 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='';
subdir='';
filename='Gameplay.txt.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/</a> -> <a href="Gameplay.txt.html">Gameplay.txt</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="Gameplay.txt.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="Gameplay.txt.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  1. Flash (AS) inits game, requests game table, and inits game table
<a name="l2"><span class="linenum">   2</span></a>  2. PHP (gengame.php) takes argument for which player, and searches for active table
<a name="l3"><span class="linenum">   3</span></a>  3. If matching table found (opposite player), returns that table. If not, randomly generates new table, and returns that
<a name="l4"><span class="linenum">   4</span></a>  4. Flash receives game table <a class="phpfunction" onClick="logFunction('name')" href="_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a> (gameXX) and calls PHP to create and populate it (init.php)
<a name="l5"><span class="linenum">   5</span></a>  5. Flash (AS) begins game, placing cages at default cell positions of (1,2), (3,2), and (5,2); player placed at (3,2)
<a name="l6"><span class="linenum">   6</span></a>  6. Flash calls <a class="function" onClick="logFunction('sendReceive')" href="_functions/sendreceive.html" onMouseOver="funcPopup(event,'sendreceive')">sendReceive</a>() function to verify the databse is in sync, and continues with normal gameplay
<a name="l7"><span class="linenum">   7</span></a>  7. Player 2 (cage-dropper) goes first, moving one cage to any position on the grif
<a name="l8"><span class="linenum">   8</span></a>  7. The cages fall one increment, and Player 1 takes his turn, moving the player one square in any right-angle direction (diagonal movement prohibited)
<a name="l9"><span class="linenum">   9</span></a>  8. This continues back and forth until the 8th turn, with the sendReceive funtion being called after each respective player's move, syncing the position with the database, and making the move on the other player's screen based on a timer syncing with the database, and motion tweens. Positions are used based on the cell location received, using the position functions to turn this into Flash location coordinates.
<a name="l10"><span class="linenum">  10</span></a>  9. The 7th turn is the last move of Player 2. After Player 1 makes his 7th move, Player 2's Flash passes an 'empty' Turn 8 move to pass the turn
<a name="l11"><span class="linenum">  11</span></a>  10. Player 1 makes their final (8th) move, and then the winner is calculated on both sides based on a collision test [hitTest()]
<a name="l12"><span class="linenum">  12</span></a>  
<a name="l13"><span class="linenum">  13</span></a>  Order of PHP API Calls:
<a name="l14"><span class="linenum">  14</span></a>  
<a name="l15"><span class="linenum">  15</span></a>  gengame.php
<a name="l16"><span class="linenum">  16</span></a>  init.php
<a name="l17"><span class="linenum">  17</span></a>  sendRecive(false)* - timer
<a name="l18"><span class="linenum">  18</span></a>  <a class="function" onClick="logFunction('sendReceive')" href="_functions/sendreceive.html" onMouseOver="funcPopup(event,'sendreceive')">sendReceive</a>(true)* - after move
<a name="l19"><span class="linenum">  19</span></a>  <a class="function" onClick="logFunction('plusTurn')" href="_functions/plusturn.html" onMouseOver="funcPopup(event,'plusturn')">plusTurn</a>()** - after move
<a name="l20"><span class="linenum">  20</span></a>  exit.php (cleanup; not yet implemented)
<a name="l21"><span class="linenum">  21</span></a>  
<a name="l22"><span class="linenum">  22</span></a>  *<a class="function" onClick="logFunction('sendReceive')" href="_functions/sendreceive.html" onMouseOver="funcPopup(event,'sendreceive')">sendReceive</a>() calls either player1.php or player2.php
<a name="l23"><span class="linenum">  23</span></a>  **<a class="function" onClick="logFunction('plusTurn')" href="_functions/plusturn.html" onMouseOver="funcPopup(event,'plusturn')">plusTurn</a>() calls calls setready.php
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'sendreceive': ['sendreceive', 'Send and receive relevant game variables; used for communication with server-side PHP/MySQL API; getreadybool and sendReceivebool keep track of active progress ', [['v5','frame1player1.as',13],['v4','frame1player2.as',220],['v5','frame1player2.as',420],['v4','frame1player1.as',4]], 20],
'plusturn': ['plusturn', '', [['v1','enterFrame.as',102],['v5','frame1player1.as',146],['v4','frame1player2.as',188],['v5','frame1player2.as',369],['v4','frame1player1.as',104],['v1','frame1.as',102]], 5],
'name': ['name', '', [], 1]};
CLASS_DATA={
};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Mon Jun  4 18:12:43 2012</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
